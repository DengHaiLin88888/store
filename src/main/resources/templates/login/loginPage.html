<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录注册</title>
    <link rel="stylesheet" href="../layui/css/layui.css">
</head>
<body style="background-color: #2E2D3C">
<div>
    <div style="padding: 20px;background-color: #9F9F9F;width: 400px;height: 150px;margin-top: 15%;margin-left: 38%;border-radius: 20px">
            <div class="layui-form-item">
                <label class="layui-form-label" style="color: white">账号：</label>
                <div class="layui-input-inline">
                    <input type="tel" id="idNumber" name="idNumber" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label" style="color: white">密码：</label>
                <div class="layui-input-inline">
                    <input type="password" id="password" name="password" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <a id="turnToHomePage">
                    <button id="loginSystem" class="layui-btn" style="position: relative;left: 120px">登录</button>
                </a>
                <button id="" class="layui-btn" style="position: relative;left: 140px">注册</button>
            </div>

    </div>

</div>
<script type="text/javascript" src="/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="../layui/layui.js"></script>
<script>
    // 登录系统
    $('#loginSystem').click(function () {
        // 账号
        var idNumber = $('#idNumber').val();
        // 密码
        var password = $('#password').val();

        if(idNumber == ''){
            layer.msg('请输入账号', {
                //3s后自动关闭
                time: 1000,
            });
            return;
        }
        if(password == ''){
            layer.msg('请输入密码', {
                //3s后自动关闭
                time: 1000,
            });
            return;
        }

        $.ajax({
            type:"post",
            url : "/login/loginSystem",
            async:false,
            data : {
                idNumber : idNumber,
                password : password
            },
            success:function (data) {
                // 状态码为200登录成功
                if(data.code == '200'){
                    layer.msg('登录成功', {
                        //3s后自动关闭
                        time: 3000,
                    });
                    // 跳转主页
                    $('#turnToHomePage').attr('href','/store/homepage')
                } else if (data.code == '404'){
                    // 状态码为404登录失败
                    layer.msg('账号不存在或密码错误', {
                        time: 3000,
                    });
                }
            }
        })
    })
</script>
</body>
</html>